---
title: 'SDK Methods'
description: 'Complete reference for all AttestProtocol TypeScript SDK methods'
icon: 'code'
---

## Factory Methods

<Note>
The SDK uses factory methods to create blockchain-specific instances. Each blockchain requires separate initialization.
</Note>

### AttestSDK.initializeStellar()

Creates and initializes a Stellar SDK instance.

**Parameters:**
| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `config` | `StellarConfig` | ✓ | Stellar network configuration |

**Returns:** `Promise<StellarAttestSDK>`

<CodeGroup>
```typescript Basic Usage
import { AttestSDK } from '@attestprotocol/sdk';

const stellarSDK = await AttestSDK.initializeStellar({
  secretKeyOrCustomSigner: 'SXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX',
  publicKey: 'GXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX',
  url: 'https://soroban-testnet.stellar.org'
});
```

```typescript Wallet Integration
// For React frontends with Freighter, Albedo, etc.
const stellarSDK = await AttestSDK.initializeStellar({
  secretKeyOrCustomSigner: stellarWallet, // Freighter, Albedo, etc.
  publicKey: 'GXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'
});
```
</CodeGroup>

**Configuration Interface:**
```typescript
interface StellarConfig extends ChainConfig {
  secretKeyOrCustomSigner: string | StellarCustomSigner;
  publicKey: string;
  url?: string;
}
```

### AttestSDK.initializeSolana()

Creates and initializes a Solana SDK instance.

**Parameters:**
| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `config` | `SolanaConfig` | ✓ | Solana network configuration |

**Returns:** `Promise<SolanaAttestSDK>`

<CodeGroup>
```typescript Secret Key Array
import { AttestSDK } from '@attestprotocol/sdk';

const solanaSDK = await AttestSDK.initializeSolana({
  walletOrSecretKey: [1, 2, 3, /* ...64 numbers */],
  programId: 'BMr9aui54YuxtpBzWXiFNmnr2iH6etRu7rMFJnKxjtpY',
  url: 'https://api.devnet.solana.com'
});
```

```typescript Anchor Wallet
const solanaSDK = await AttestSDK.initializeSolana({
  walletOrSecretKey: anchorWallet,
  url: 'https://api.devnet.solana.com'
});
```
</CodeGroup>

**Configuration Interface:**
```typescript
interface SolanaConfig extends ChainConfig {
  walletOrSecretKey: number[] | anchor.Wallet;
  programId?: string;
  url?: string;
}
```

---

## Response Pattern

<Info>
All SDK methods return a consistent response wrapper for unified error handling across chains.
</Info>

```typescript
type AttestSDKResponse<T> = 
  | { data: T; error?: undefined }
  | { data?: undefined; error: any }
```

**Usage Pattern:**
```typescript
const result = await sdk.fetchAuthority();

if (result.error) {
  console.error('Operation failed:', result.error);
  return;
}

// Use result.data safely
console.log('Authority:', result.data);
```

---

## Authority Methods

### fetchAuthority()

Retrieves authority information for the current wallet.

**Parameters:** None

**Returns:**
- **Stellar:** `AttestSDKResponse<StellarFetchAuthorityResult | null>`
- **Solana:** `AttestSDKResponse<SolanaFetchAuthorityResult>`

**Chain Support:**
| Chain | Return Type | Description |
|-------|-------------|-------------|
| Stellar | `{ address: string, metadata: string }` | Authority address and metadata |
| Solana | `{ authority: PublicKey, isVerified: boolean, firstDeployment: BN }` | Authority details with verification status |

<CodeGroup>
```typescript Stellar
const result = await stellarSDK.fetchAuthority();

if (result.data) {
  console.log('Authority address:', result.data.address);
  console.log('Metadata:', result.data.metadata);
}
```

```typescript Solana
const result = await solanaSDK.fetchAuthority();

if (result.data) {
  console.log('Authority:', result.data.authority.toBase58());
  console.log('Verified:', result.data.isVerified);
}
```
</CodeGroup>

### registerAuthority()

Registers the current wallet as an authority.

**Parameters:** None

**Returns:**
- **Stellar:** `AttestSDKResponse<string>` (transaction hash)
- **Solana:** `AttestSDKResponse<anchor.web3.PublicKey>` (authority PDA)

<CodeGroup>
```typescript Stellar
const result = await stellarSDK.registerAuthority();

if (result.data) {
  console.log('Registration TX:', result.data);
}
```

```typescript Solana
const result = await solanaSDK.registerAuthority();

if (result.data) {
  console.log('Authority PDA:', result.data.toBase58());
}
```
</CodeGroup>

---

## Schema Methods

### createSchema()

Creates a new attestation schema.

<Warning>
Schema names must be unique within each blockchain. Attempting to create a duplicate will fail.
</Warning>

**Parameters:**

<Tabs>
  <Tab title="Stellar">
    | Parameter | Type | Required | Description |
    |-----------|------|----------|-------------|
    | `schemaName` | `string` | ✓ | Unique schema identifier |
    | `schemaContent` | `string` | ✓ | Schema definition |
    | `resolverAddress` | `string` | ✗ | Resolver contract address |
    | `revocable` | `boolean` | ✗ | Revocation capability (default: true) |
  </Tab>
  <Tab title="Solana">
    | Parameter | Type | Required | Description |
    |-----------|------|----------|-------------|
    | `schemaName` | `string` | ✓ | Unique schema identifier |
    | `schemaContent` | `string` | ✓ | Schema definition |
    | `resolverAddress` | `PublicKey` | ✗ | Resolver contract address |
    | `revocable` | `boolean` | ✗ | Revocation capability |
    | `levy` | `LevyConfig` | ✗ | Fee configuration |
  </Tab>
</Tabs>

**Returns:**
- **Stellar:** `AttestSDKResponse<StellarCreateSchemaResult>`
- **Solana:** `AttestSDKResponse<anchor.web3.PublicKey>`

<CodeGroup>
```typescript Stellar
const result = await stellarSDK.createSchema({
  schemaName: 'kyc-verification',
  schemaContent: 'verified:bool,level:string,score:uint',
  revocable: true
});

if (result.data) {
  console.log('Schema UID:', result.data.schemaUID);
  console.log('Schema name:', result.data.schemaName);
}
```

```typescript Solana
const result = await solanaSDK.createSchema({
  schemaName: 'reputation-score',
  schemaContent: 'score:u8,category:string,verified_at:u64',
  revocable: true,
  levy: {
    amount: new anchor.BN(1000000),
    asset: new anchor.web3.PublicKey('So11111111111111111111111111111111111111112')
  }
});

if (result.data) {
  console.log('Schema PDA:', result.data.toBase58());
}
```
</CodeGroup>

### fetchSchema()

Retrieves schema by UID.

**Parameters:**
| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `schemaUID` | `string` (Stellar) / `PublicKey` (Solana) | ✓ | Schema identifier |

**Returns:**
- **Stellar:** `AttestSDKResponse<StellarFetchSchemaResult | null>`
- **Solana:** `AttestSDKResponse<SolanaFetchSchemaResult | null>`

<CodeGroup>
```typescript Stellar Result
interface StellarFetchSchemaResult {
  uid: string;
  definition: string;
  authority: string;
  revocable: boolean;
  resolver: string | null;
}
```

```typescript Solana Result
interface SolanaFetchSchemaResult {
  uid: anchor.web3.PublicKey;
  schema: string;
  resolver?: anchor.web3.PublicKey;
  revocable: boolean;
  deployer: anchor.web3.PublicKey;
  levy?: {
    amount: anchor.BN;
    asset: anchor.web3.PublicKey;
    recipient: anchor.web3.PublicKey;
  };
}
```
</CodeGroup>

---

## Attestation Methods

### attest()

Creates a new attestation.

<Info>
Attestation data must match the schema definition format. Mismatched data will cause validation errors.
</Info>

**Parameters:**

<Tabs>
  <Tab title="Stellar">
    | Parameter | Type | Required | Description |
    |-----------|------|----------|-------------|
    | `schemaUID` | `string` | ✓ | 64-character hex string |
    | `subject` | `string` | ✓ | Stellar address |
    | `value` | `string` | ✓ | Attestation data |
    | `reference` | `string` | ✓ | Reference string |
  </Tab>
  <Tab title="Solana">
    | Parameter | Type | Required | Description |
    |-----------|------|----------|-------------|
    | `schemaData` | `PublicKey` | ✓ | Schema PDA |
    | `data` | `string` | ✓ | Attestation data |
    | `refUID` | `PublicKey` | ✗ | Reference attestation |
    | `expirationTime` | `number` | ✗ | Expiration timestamp |
    | `revocable` | `boolean` | ✗ | Revocation capability |
    | `accounts` | `object` | ✓ | Required account addresses |
  </Tab>
</Tabs>

<CodeGroup>
```typescript Stellar
const result = await stellarSDK.attest({
  schemaUID: 'abc123...',
  subject: 'GXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX',
  value: 'verified:true,level:enhanced,score:95',
  reference: 'kyc-2024-001'
});

if (result.data) {
  console.log('Attestation TX:', result.data);
}
```

```typescript Solana
const result = await solanaSDK.attest({
  schemaData: schemaPDA,
  data: 'score:85,category:defi,verified_at:1704067200',
  expirationTime: Math.floor(Date.now() / 1000) + (365 * 24 * 60 * 60),
  revocable: true,
  accounts: {
    recipient: recipientPubkey,
    levyReceipent: walletPubkey,
    mintAccount: mintPubkey
  }
});

if (result.data) {
  console.log('Attestation PDA:', result.data.toBase58());
}
```
</CodeGroup>

### fetchAttestation()

Retrieves attestation data.

**Parameters:**

<Tabs>
  <Tab title="Stellar">
    | Parameter | Type | Required | Description |
    |-----------|------|----------|-------------|
    | `schemaUID` | `string` | ✓ | 64-character hex string |
    | `subject` | `string` | ✓ | Stellar address |
    | `reference` | `string` | ✗ | Reference string |
  </Tab>
  <Tab title="Solana">
    | Parameter | Type | Required | Description |
    |-----------|------|----------|-------------|
    | `attestation` | `PublicKey` or `string` | ✓ | Attestation PDA or identifier |
  </Tab>
</Tabs>

<CodeGroup>
```typescript Stellar
const result = await stellarSDK.fetchAttestation({
  schemaUID: 'abc123...',
  subject: 'GXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX',
  reference: 'kyc-2024-001'
});

if (result.data && !result.data.revoked) {
  console.log('Attestation value:', result.data.value);
}
```

```typescript Solana
const result = await solanaSDK.fetchAttestation(attestationPDA);

if (result.data) {
  console.log('Attestation data:', result.data.data);
  console.log('Attester:', result.data.attester.toBase58());
}
```
</CodeGroup>

### revokeAttestation()

Revokes an existing attestation.

<Warning>
Only the original attester can revoke an attestation. The attestation must be revocable.
</Warning>

**Parameters:**

<Tabs>
  <Tab title="Stellar">
    | Parameter | Type | Required | Description |
    |-----------|------|----------|-------------|
    | `schemaUID` | `string` | ✓ | 64-character hex string |
    | `subject` | `string` | ✓ | Stellar address |
    | `reference` | `string` | ✗ | Reference string |
  </Tab>
  <Tab title="Solana">
    | Parameter | Type | Required | Description |
    |-----------|------|----------|-------------|
    | `attestationUID` | `PublicKey` | ✓ | Attestation PDA |
    | `recipient` | `PublicKey` | ✓ | Recipient address |
    | `reference` | `string` | ✗ | Reference string |
  </Tab>
</Tabs>

---

## Utility Methods

### getWalletBalance()

<Note>
This method is only available on Solana. Use native Stellar SDK methods for Stellar balance queries.
</Note>

Returns wallet balance and address information.

**Parameters:** None

**Returns:** `AttestSDKResponse<{ balance: number; address: PublicKey }>`

```typescript
const result = await solanaSDK.getWalletBalance();

if (result.data) {
  console.log('Address:', result.data.address.toBase58());
  console.log('Balance:', result.data.balance, 'SOL');
}
```

### initialize()

<Note>
This method is only available on Stellar and requires admin privileges.
</Note>

Initializes the protocol contract.

**Parameters:** None

**Returns:** `AttestSDKResponse<void>`

```typescript
const result = await stellarSDK.initialize();

if (!result.error) {
  console.log('Protocol initialized successfully');
}
```

---

## Chain Support Matrix

<Info>
Not all methods are available on all chains. Check this matrix before implementation.
</Info>

| Method | Stellar | Solana | Notes |
|--------|---------|--------|-------|
| `fetchAuthority()` | ✓ | ✓ | Different return structures |
| `registerAuthority()` | ✓ | ✓ | Returns string vs PublicKey |
| `createSchema()` | ✓ | ✓ | Solana supports levy config |
| `fetchSchema()` | ✓ | ✓ | Different identifier types |
| `attest()` | ✓ | ✓ | Different parameter sets |
| `fetchAttestation()` | ✓ | ✓ | Different query methods |
| `revokeAttestation()` | ✓ | ✓ | Similar functionality |
| `getWalletBalance()` | ✗ | ✓ | Solana only |
| `initialize()` | ✓ | ✗ | Stellar only |
| `initializeAuthority()` | ✓ | ✗ | Stellar only |

---

## Contract Information

### Default Addresses

<CardGroup cols={2}>
  <Card title="Stellar Testnet" icon="circle-nodes">
    **Protocol Contract:**
    `CBPL7XR7NNPTNSIIFWQMWLSCX3B3MM36UYX4TW3QXJKTIEA6KDLRYAQP`
    
    **Authority Contract:**
    `CDQREK6BTPEVD4O56XR6TKLEEMNYTRJUG466J2ERNE5POIEKN2N6O7EL`
    
    **RPC Endpoint:**
    `https://soroban-testnet.stellar.org`
  </Card>
  
  <Card title="Solana Devnet" icon="circle-nodes">
    **Program ID:**
    `BMr9aui54YuxtpBzWXiFNmnr2iH6etRu7rMFJnKxjtpY`
    
    **RPC Endpoint:**
    `https://api.devnet.solana.com`
  </Card>
</CardGroup>

---

## TypeScript Imports

Import the SDK components you need:

```typescript
// Main SDK factory
import { AttestSDK } from '@attestprotocol/sdk';

// Configuration interfaces
import { 
  StellarConfig, 
  SolanaConfig 
} from '@attestprotocol/sdk';

// Chain-specific SDK classes
import { 
  StellarAttestSDK, 
  SolanaAttestSDK 
} from '@attestprotocol/sdk';

// Response wrapper type
import { AttestSDKResponse } from '@attestprotocol/sdk';

// Result interfaces
import {
  StellarFetchAuthorityResult,
  SolanaFetchAuthorityResult,
  StellarFetchSchemaResult,
  SolanaFetchSchemaResult,
  StellarFetchAttestationResult,
  SolanaFetchAttestationResult
} from '@attestprotocol/sdk';
```

## Next Steps

<CardGroup cols={2}>
  <Card title="Examples" icon="laptop-code" href="/sdks/typescript/examples">
    See implementation examples
  </Card>
  <Card title="Error Handling" icon="triangle-exclamation" href="/reference/errors">
    Learn about error codes
  </Card>
</CardGroup>